# Nom de l'ex√©cutable
NAME = irc

# Compilateur et options
CXX = c++
CXXFLAGS = -Wall -Wextra -Werror -std=c++98 -g

# Fichiers sources
SRC =	src/main.cpp\
		src/Server.cpp\
		src/Client.cpp\
		src/CommandHandler.cpp\
		src/Channel.cpp\
		src/Utils.cpp

# Dossier pour les fichiers objets
OBJ_DIR = obj
OBJ = $(SRC:%.cpp=$(OBJ_DIR)/%.o)

# R√®gle par d√©faut : compilation
all: $(NAME)
	@echo "‚úÖ Compilation termin√©e avec succ√®s pour $(NAME)"

# Cr√©ation de l'ex√©cutable
$(NAME): $(OBJ)
	@$(CXX) $(CXXFLAGS) -o $(NAME) $(OBJ)
	

# R√®gle pour compiler les fichiers objets
$(OBJ_DIR)/%.o: %.cpp
	@mkdir -p $(dir $@)  # Cr√©e tous les sous-dossiers n√©cessaires
	@$(CXX) $(CXXFLAGS) -c $< -o $@

# R√®gle pour nettoyer les fichiers objets
clean:
	@rm -rf $(OBJ_DIR)
	@echo "üßπ Fichiers objets supprim√©s"

# R√®gle pour nettoyer tout (y compris l'ex√©cutable)
fclean: clean
	@rm -f $(NAME)
	@echo "üßº Nettoyage complet effectu√©"

# R√®gle pour recompiler enti√®rement
re: fclean all

# √âvite que make consid√®re ces r√®gles comme des fichiers
.PHONY: all clean fclean re
